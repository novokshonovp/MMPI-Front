<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <title> MMPI </title>
      <style>
        .container {
          width: 100%;
          height: 100%;
          position: absolute;
          top: 0;
          left: 0;
          overflow: auto;
        }

        .row {
          margin:10px auto 10px;
          width: 1000px;
        }
        .question {
          padding-top: 10%;
          line-height: 3em;
          margin: auto;
          text-align: center;
          word-wrap: break-word;
        }
        .truth {
          text-align: right;
          float: left;
          width: 50%;
          margin-right: 30px;
        }
        .false {
          width: 40%;
          float: left;
        }
        .button-xlarge {
          font-size: 125%;
          width: 200px;
        }
      </style>
      <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13/dist/vue.js"></script>
      <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <div class="container" id="root">
      <div class="row question">
        <h1>
          <p id="question_text">{{question}}</p>
        </h1>
      </div>
      <div class="row" id="answers">
          <div class="truth"><button class="button-xlarge" v-on:click="onTruth">Верно</button></div>
          <div class="false"><button class="button-xlarge" v-on:click="onFalse">Неверно</button></div>
    </div>
    </div>

    <script>
      axios.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';
      var app= new Vue ({
        el: '#root',
        data: { number: '<%= @data[:number] %>',
                question: '<%= @data[:question] %>',
                finished: false },
        methods: {
          onTruth(){
            axios.get('/?question=' + this.number + '&answer=true')
               .then(function (response) {
                 app.number = response.data.number;
                 app.question = response.data.question;
                 if (response.data.finished == true)
                 {
                   app.question =  "Finished!!!";
                 }
                 console.log(response);
               })
               .catch(function (error) {
                 console.log(error.response.data);
               });
          },
          onFalse(){
             alert('False');
          }
        }
      })

    </script>
  </body>
</html>
